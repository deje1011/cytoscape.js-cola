!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("webcola")):"function"==typeof define&&define.amd?define(["webcola"],t):"object"==typeof exports?exports.cytoscapeCola=t(require("webcola")):n.cytoscapeCola=t(n.webcola)}(this,function(n){return function(n){function t(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return n[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var e={};return t.m=n,t.c=e,t.i=function(n){return n},t.d=function(n,e,o){t.o(n,e)||Object.defineProperty(n,e,{configurable:!1,enumerable:!0,get:o})},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=3)}([function(n,t,e){"use strict";function o(n){this.options=r({},a,n)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},r=e(1),a=e(2),c=e(5)||("undefined"!=typeof window?window.cola:null),u=e(4),s=function(n){return(void 0===n?"undefined":i(n))===i("")},f=function(n){return(void 0===n?"undefined":i(n))===i(0)},d=function(n){return null!=n&&(void 0===n?"undefined":i(n))===i({})},l=function(n){return null!=n&&(void 0===n?"undefined":i(n))===i(function(){})},p=function(){},y=function(n,t){if(l(n)){return n.apply(t,[t])}return n};o.prototype.run=function(){var n=this,t=this.options;n.manuallyStopped=!1;var e=t.cy,o=t.eles,i=o.nodes(),r=o.edges(),a=!1,l=function(n){return n.isParent()},h=i.filter(l),g=i.subtract(h),m=t.boundingBox||{x1:0,y1:0,w:e.width(),h:e.height()};void 0===m.x2&&(m.x2=m.x1+m.w),void 0===m.w&&(m.w=m.x2-m.x1),void 0===m.y2&&(m.y2=m.y1+m.h),void 0===m.h&&(m.h=m.y2-m.y1);var v=function(){for(var n=0;n<i.length;n++){var o=i[n],r=o.layoutDimensions(t),c=o.scratch("cola");if(!c.updatedDims){var u=y(t.nodeSpacing,o);c.width=r.w+2*u,c.height=r.h+2*u}}i.positions(function(n){var t=n.scratch().cola,e=void 0;return!n.grabbed()&&g.contains(n)&&(e={x:m.x1+t.x,y:m.y1+t.y},f(e.x)&&f(e.y)||(e=void 0)),e}),i.updateCompoundBounds(),a||(b(),a=!0),t.fit&&e.fit(t.padding)},x=function(){t.ungrabifyWhileSimulating&&k.grabify(),e.off("destroy",L),i.off("grab free position",D),i.off("lock unlock",T),n.one("layoutstop",t.stop),n.trigger({type:"layoutstop",layout:n})},b=function(){n.one("layoutready",t.ready),n.trigger({type:"layoutready",layout:n})},w=t.refresh;w=t.refresh<0?1:Math.max(1,w);var S=n.adaptor=c.adaptor({trigger:function(n){var e=c.EventType?c.EventType.tick:null,o=c.EventType?c.EventType.end:null;switch(n.type){case"tick":case e:t.animate&&v();break;case"end":case o:v(),t.infinite||x()}},kick:function(){var e=!0,o=function(){if(n.manuallyStopped)return x(),!0;var o=S.tick();return t.infinite||e||S.convergenceThreshold(t.convergenceThreshold),e=!1,o&&t.infinite&&S.resume(),o},i=function(){for(var n=void 0,t=0;t<w&&!n;t++)n=n||o();return n};if(t.animate){u(function n(){i()||u(n)})}else for(;!o(););},on:p,drag:p});n.adaptor=S;var k=i.filter(":grabbable");t.ungrabifyWhileSimulating&&k.ungrabify();var L=void 0;e.one("destroy",L=function(){n.stop()});var D=void 0;i.on("grab free position",D=function(n){var t=this,e=t.scratch().cola,o=t.position();if(n.cyTarget===t||n.target===t)switch(n.type){case"grab":S.dragstart(e);break;case"free":S.dragend(e);break;case"position":e.px===o.x-m.x1&&e.py===o.y-m.y1||(e.px=o.x-m.x1,e.py=o.y-m.y1)}});var T=void 0;i.on("lock unlock",T=function(){var n=this,t=n.scratch().cola;t.fixed=n.locked(),n.locked()?S.dragstart(t):S.dragend(t)}),S.nodes(g.map(function(n,e){var o=y(t.nodeSpacing,n),i=n.position(),r=n.layoutDimensions(t);return n.scratch().cola={x:t.randomize&&!n.locked()||void 0===i.x?Math.round(Math.random()*m.w):i.x,y:t.randomize&&!n.locked()||void 0===i.y?Math.round(Math.random()*m.h):i.y,width:r.w+2*o,height:r.h+2*o,index:e,fixed:n.locked()}}));var q=[];if(t.alignment){if(t.alignment.vertical){t.alignment.vertical.forEach(function(n){var t=[];n.forEach(function(n){var e=n.node,o=e.scratch().cola,i=o.index;t.push({node:i,offset:n.offset?n.offset:0})}),q.push({type:"alignment",axis:"x",offsets:t})})}if(t.alignment.horizontal){t.alignment.horizontal.forEach(function(n){var t=[];n.forEach(function(n){var e=n.node,o=e.scratch().cola,i=o.index;t.push({node:i,offset:n.offset?n.offset:0})}),q.push({type:"alignment",axis:"y",offsets:t})})}}t.gapInequalities&&t.gapInequalities.forEach(function(n){var t=n.left.scratch().cola.index,e=n.right.scratch().cola.index;q.push({axis:n.axis,left:t,right:e,gap:n.gap,equality:n.equality})}),q.length>0&&S.constraints(q),S.groups(h.map(function(n,e){var o=y(t.nodeSpacing,n),i=function(t){return parseFloat(n.style("padding-"+t))},r=i("left")+o,a=i("right")+o,c=i("top")+o,u=i("bottom")+o;return n.scratch().cola={index:e,padding:Math.max(r,a,c,u),leaves:n.children().intersection(g).map(function(n){return n[0].scratch().cola.index}),fixed:n.locked()},n}).map(function(n){return n.scratch().cola.groups=n.children().intersection(h).map(function(n){return n.scratch().cola.index}),n.scratch().cola}));var E=void 0,j=void 0;null!=t.edgeLength?(E=t.edgeLength,j="linkDistance"):null!=t.edgeSymDiffLength?(E=t.edgeSymDiffLength,j="symmetricDiffLinkLengths"):null!=t.edgeJaccardLength?(E=t.edgeJaccardLength,j="jaccardLinkLengths"):(E=100,j="linkDistance");var I=function(n){return n.calcLength};if(S.links(r.stdFilter(function(n){return g.contains(n.source())&&g.contains(n.target())}).map(function(n){var t=n.scratch().cola={source:n.source()[0].scratch().cola.index,target:n.target()[0].scratch().cola.index};return null!=E&&(t.calcLength=y(E,n)),t})),S.size([m.w,m.h]),null!=E&&S[j](I),t.flow){var O=void 0;s(t.flow)?O={axis:t.flow,minSeparation:50}:f(t.flow)?O={axis:"y",minSeparation:t.flow}:d(t.flow)?(O=t.flow,O.axis=O.axis||"y",O.minSeparation=null!=O.minSeparation?O.minSeparation:50):O={axis:"y",minSeparation:50},S.flowLayout(O.axis,O.minSeparation)}return n.trigger({type:"layoutstart",layout:n}),S.avoidOverlaps(t.avoidOverlap).handleDisconnected(t.handleDisconnected).start(t.unconstrIter,t.userConstIter,t.allConstIter,void 0,void 0,t.centerGraph),t.infinite||setTimeout(function(){n.manuallyStopped||S.stop()},t.maxSimulationTime),this},o.prototype.stop=function(){return this.adaptor&&(this.manuallyStopped=!0,this.adaptor.stop()),this},n.exports=o},function(n,t,e){"use strict";n.exports=null!=Object.assign?Object.assign.bind(Object):function(n){for(var t=arguments.length,e=Array(t>1?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];return e.filter(function(n){return null!=n}).forEach(function(t){Object.keys(t).forEach(function(e){return n[e]=t[e]})}),n}},function(n,t,e){"use strict";var o={animate:!0,refresh:1,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,ready:function(){},stop:function(){},randomize:!1,avoidOverlap:!0,handleDisconnected:!0,convergenceThreshold:.01,nodeSpacing:function(n){return 10},flow:void 0,alignment:void 0,gapInequalities:void 0,centerGraph:!0,edgeLength:void 0,edgeSymDiffLength:void 0,edgeJaccardLength:void 0,unconstrIter:void 0,userConstIter:void 0,allConstIter:void 0,infinite:!1};n.exports=o},function(n,t,e){"use strict";var o=e(0),i=function(n){n&&n("layout","cola",o)};"undefined"!=typeof cytoscape&&i(cytoscape),n.exports=i},function(n,t,e){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},i=void 0;i="undefined"!==("undefined"==typeof window?"undefined":o(window))?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(n){return setTimeout(n,16)}:function(n){n()},n.exports=i},function(t,e){t.exports=n}])});